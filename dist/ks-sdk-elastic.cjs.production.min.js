"use strict";function t(t){return t&&"object"==typeof t&&"default"in t?t.default:t}Object.defineProperty(exports,"__esModule",{value:!0});var e=t(require("jsbi")),n=require("@kyberswap/ks-sdk-core"),i=require("@ethersproject/abi"),r=require("@ethersproject/address"),a=require("@ethersproject/solidity"),u=t(require("tiny-invariant")),o=require("@uniswap/v3-periphery/artifacts/contracts/interfaces/ISelfPermit.sol/ISelfPermit.json");function s(t,e,n,i,r,a,u){try{var o=t[a](u),s=o.value}catch(t){return void n(t)}o.done?e(s):Promise.resolve(s).then(i,r)}function p(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var a=t.apply(e,n);function u(t){s(a,i,r,u,o,"next",t)}function o(t){s(a,i,r,u,o,"throw",t)}u(void 0)}))}}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function c(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function d(){return(d=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function m(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return y(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(t,void 0):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var f,h,T,v=(function(t){var e=function(t){var e=Object.prototype,n=e.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},r=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function o(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{o({},"")}catch(t){o=function(t,e,n){return t[e]=n}}function s(t,e,n,i){var r=Object.create((e&&e.prototype instanceof c?e:c).prototype),a=new A(i||[]);return r._invoke=function(t,e,n){var i="suspendedStart";return function(r,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===r)throw a;return{value:void 0,done:!0}}for(n.method=r,n.arg=a;;){var u=n.delegate;if(u){var o=g(u,n);if(o){if(o===l)continue;return o}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var s=p(t,e,n);if("normal"===s.type){if(i=n.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(i="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),r}function p(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var l={};function c(){}function d(){}function y(){}var m={};o(m,r,(function(){return this}));var f=Object.getPrototypeOf,h=f&&f(f(x([])));h&&h!==e&&n.call(h,r)&&(m=h);var T=y.prototype=c.prototype=Object.create(m);function v(t){["next","throw","return"].forEach((function(e){o(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){var i;this._invoke=function(r,a){function u(){return new e((function(i,u){!function i(r,a,u,o){var s=p(t[r],t,a);if("throw"!==s.type){var l=s.arg,c=l.value;return c&&"object"==typeof c&&n.call(c,"__await")?e.resolve(c.__await).then((function(t){i("next",t,u,o)}),(function(t){i("throw",t,u,o)})):e.resolve(c).then((function(t){l.value=t,u(l)}),(function(t){return i("throw",t,u,o)}))}o(s.arg)}(r,a,i,u)}))}return i=i?i.then(u,u):u()}}function g(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,g(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var i=p(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,l;var r=i.arg;return r?r.done?(e[t.resultName]=r.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):r:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function b(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function x(t){if(t){var e=t[r];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function e(){for(;++i<t.length;)if(n.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:q}}function q(){return{value:void 0,done:!0}}return d.prototype=y,o(T,"constructor",y),o(y,"constructor",d),d.displayName=o(y,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,o(t,u,"GeneratorFunction")),t.prototype=Object.create(T),t},t.awrap=function(t){return{__await:t}},v(k.prototype),o(k.prototype,a,(function(){return this})),t.AsyncIterator=k,t.async=function(e,n,i,r,a){void 0===a&&(a=Promise);var u=new k(s(e,n,i,r),a);return t.isGeneratorFunction(n)?u:u.next().then((function(t){return t.done?t.value:u.next()}))},v(T),o(T,u,"Generator"),o(T,r,(function(){return this})),o(T,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var i=e.pop();if(i in t)return n.value=i,n.done=!1,n}return n.done=!0,n}},t.values=x,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function i(n,i){return u.type="throw",u.arg=t,e.next=n,i&&(e.method="next",e.arg=void 0),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],u=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var o=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(o&&s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(o){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var u=a?a.completion:{};return u.type=t,u.arg=e,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(u)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),b(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;b(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:x(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}(t.exports);try{regeneratorRuntime=e}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}(T={exports:{}}),T.exports),k="0x0000000000000000000000000000000000000000",g="0xd71790a46dff0e075392efbd706356cd5a822a782f46e9859829440065879f81";(h=exports.FeeAmount||(exports.FeeAmount={}))[h.STABLE=8]="STABLE",h[h.LOWEST=10]="LOWEST",h[h.LOW=40]="LOW",h[h.MEDIUM=300]="MEDIUM",h[h.HIGH=1e3]="HIGH";var I=((f={})[exports.FeeAmount.STABLE]=1,f[exports.FeeAmount.LOWEST]=1,f[exports.FeeAmount.LOW]=8,f[exports.FeeAmount.MEDIUM]=60,f[exports.FeeAmount.HIGH]=200,f[50]=10,f);function b(t){var e=t.factoryAddress,n=t.tokenA,u=t.tokenB,o=t.fee,s=t.initCodeHashManualOverride,p=n.sortsBefore(u)?[n,u]:[u,n];return r.getCreate2Address(e,a.keccak256(["bytes"],[i.defaultAbiCoder.encode(["address","address","uint24"],[p[0].address,p[1].address,o])]),null!=s?s:g)}var A=function(){function t(){}var e=t.prototype;return e.getTick=function(){var e=p(v.mark((function e(n){return v.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error(t.ERROR_MESSAGE);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.nextInitializedTickWithinOneWord=function(){var e=p(v.mark((function e(n,i,r){return v.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error(t.ERROR_MESSAGE);case 1:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),e.nextInitializedTickWithinFixedDistance=function(){var e=p(v.mark((function e(n,i,r){return v.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error(t.ERROR_MESSAGE);case 1:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),t}();A.ERROR_MESSAGE="No tick data provider was given";var x=e.BigInt(-1),q=e.BigInt(0),w=e.BigInt(1),R=e.exponentiate(e.BigInt(2),e.BigInt(96)),P=e.exponentiate(R,e.BigInt(2)),E=e.BigInt(2),S=[128,64,32,16,8,4,2,1].map((function(t){return[t,e.exponentiate(E,e.BigInt(t))]}));function M(t){e.greaterThan(t,q)||u(!1),e.lessThanOrEqual(t,n.MaxUint256)||u(!1);for(var i,r=0,a=m(S);!(i=a()).done;){var o=i.value,s=o[0];e.greaterThanOrEqual(t,o[1])&&(t=e.signedRightShift(t,e.BigInt(s)),r+=s)}return r}function O(t,n){return e.signedRightShift(e.multiply(t,e.BigInt(n)),e.BigInt(128))}var C=e.exponentiate(e.BigInt(2),e.BigInt(32)),N=function(){function t(){}return t.getSqrtRatioAtTick=function(i){i>=t.MIN_TICK&&i<=t.MAX_TICK&&Number.isInteger(i)||u(!1);var r=i<0?-1*i:i,a=e.BigInt(0!=(1&r)?"0xfffcb933bd6fad37aa2d162d1a594001":"0x100000000000000000000000000000000");return 0!=(2&r)&&(a=O(a,"0xfff97272373d413259a46990580e213a")),0!=(4&r)&&(a=O(a,"0xfff2e50f5f656932ef12357cf3c7fdcc")),0!=(8&r)&&(a=O(a,"0xffe5caca7e10e4e61c3624eaa0941cd0")),0!=(16&r)&&(a=O(a,"0xffcb9843d60f6159c9db58835c926644")),0!=(32&r)&&(a=O(a,"0xff973b41fa98c081472e6896dfb254c0")),0!=(64&r)&&(a=O(a,"0xff2ea16466c96a3843ec78b326b52861")),0!=(128&r)&&(a=O(a,"0xfe5dee046a99a2a811c461f1969c3053")),0!=(256&r)&&(a=O(a,"0xfcbe86c7900a88aedcffc83b479aa3a4")),0!=(512&r)&&(a=O(a,"0xf987a7253ac413176f2b074cf7815e54")),0!=(1024&r)&&(a=O(a,"0xf3392b0822b70005940c7a398e4b70f3")),0!=(2048&r)&&(a=O(a,"0xe7159475a2c29b7443b29c7fa6e889d9")),0!=(4096&r)&&(a=O(a,"0xd097f3bdfd2022b8845ad8f792aa5825")),0!=(8192&r)&&(a=O(a,"0xa9f746462d870fdf8a65dc1f90e061e5")),0!=(16384&r)&&(a=O(a,"0x70d869a156d2a1b890bb3df62baf32f7")),0!=(32768&r)&&(a=O(a,"0x31be135f97d08fd981231505542fcfa6")),0!=(65536&r)&&(a=O(a,"0x9aa508b5b7a84e1c677de54f3e99bc9")),0!=(131072&r)&&(a=O(a,"0x5d6af8dedb81196699c329225ee604")),0!=(262144&r)&&(a=O(a,"0x2216e584f5fa1ea926041bedfe98")),0!=(524288&r)&&(a=O(a,"0x48a170391f7dc42444e8fa2")),i>0&&(a=e.divide(n.MaxUint256,a)),e.greaterThan(e.remainder(a,C),q)?e.add(e.divide(a,C),w):e.divide(a,C)},t.getTickAtSqrtRatio=function(n){e.greaterThanOrEqual(n,t.MIN_SQRT_RATIO)&&e.lessThan(n,t.MAX_SQRT_RATIO)||u(!1);var i,r=e.leftShift(n,e.BigInt(32)),a=M(r);i=e.greaterThanOrEqual(e.BigInt(a),e.BigInt(128))?e.signedRightShift(r,e.BigInt(a-127)):e.leftShift(r,e.BigInt(127-a));for(var o=e.leftShift(e.subtract(e.BigInt(a),e.BigInt(128)),e.BigInt(64)),s=0;s<14;s++){i=e.signedRightShift(e.multiply(i,i),e.BigInt(127));var p=e.signedRightShift(i,e.BigInt(128));o=e.bitwiseOr(o,e.leftShift(p,e.BigInt(63-s))),i=e.signedRightShift(i,p)}var l=e.multiply(o,e.BigInt("255738958999603826347141")),c=e.toNumber(e.signedRightShift(e.subtract(l,e.BigInt("3402992956809132418596140100660247210")),e.BigInt(128))),d=e.toNumber(e.signedRightShift(e.add(l,e.BigInt("291339464771989622907027621153398088495")),e.BigInt(128)));return c===d?c:e.lessThanOrEqual(t.getSqrtRatioAtTick(d),n)?d:c},t}();function L(t,e){for(var n=0;n<t.length-1;n++)if(e(t[n],t[n+1])>0)return!1;return!0}function _(t,e){return t.index-e.index}N.MIN_TICK=-887272,N.MAX_TICK=-N.MIN_TICK,N.MIN_SQRT_RATIO=e.BigInt("4295128739"),N.MAX_SQRT_RATIO=e.BigInt("1461446703485210103287273052203988822378723970342");var D=function(){function t(){}return t.validateList=function(t,n){n>0||u(!1),t.every((function(t){return t.index%n==0}))||u(!1),e.equal(t.reduce((function(t,n){return e.add(t,n.liquidityNet)}),q),q)||u(!1),L(t,_)||u(!1)},t.isBelowSmallest=function(t,e){return t.length>0||u(!1),e<t[0].index},t.isAtOrAboveLargest=function(t,e){return t.length>0||u(!1),e>=t[t.length-1].index},t.getTick=function(t,e){var n=t[this.binarySearch(t,e)];return n.index!==e&&u(!1),n},t.binarySearch=function(t,e){this.isBelowSmallest(t,e)&&u(!1);for(var n,i=0,r=t.length-1;;){if(t[n=Math.floor((i+r)/2)].index<=e&&(n===t.length-1||t[n+1].index>e))return n;t[n].index<e?i=n+1:r=n-1}},t.nextInitializedTick=function(e,n,i){return i?(t.isBelowSmallest(e,n)&&u(!1),t.isAtOrAboveLargest(e,n)?e[e.length-1]:e[this.binarySearch(e,n)]):(this.isAtOrAboveLargest(e,n)&&u(!1),this.isBelowSmallest(e,n)?e[0]:e[this.binarySearch(e,n)+1])},t.nextInitializedTickWithinOneWord=function(e,n,i,r){var a=Math.floor(n/r);if(i){var u=(a>>8<<8)*r;if(t.isBelowSmallest(e,n))return[u,!1];var o=t.nextInitializedTick(e,n,i).index,s=Math.max(u,o);return[s,s===o]}var p=(1+(a+1>>8)<<8)*r-1;if(this.isAtOrAboveLargest(e,n))return[p,!1];var l=this.nextInitializedTick(e,n,i).index,c=Math.min(p,l);return[c,c===l]},t.nextInitializedTickWithinFixedDistance=function(e,n,i,r){if(void 0===r&&(r=480),i){var a=n-r;if(t.isBelowSmallest(e,n))return[a,!1];var u=t.nextInitializedTick(e,n,i).index,o=Math.max(a,u);return[o,o===u]}var s=n+r;if(this.isAtOrAboveLargest(e,n))return[s,!1];var p=this.nextInitializedTick(e,n,i).index,l=Math.min(s,p);return[l,l===p]},t}();function B(t){var n=e.BigInt(t).toString(16);return n.length%2!=0&&(n="0"+n),"0x"+n}function F(t,e){var n=t.pools.reduce((function(t,e,n){var i=t.inputToken,r=t.path,a=t.types,u=e.token0.equals(i)?e.token1:e.token0;return 0===n?{inputToken:u,types:["address","uint24","address"],path:[i.address,e.fee,u.address]}:{inputToken:u,types:[].concat(a,["uint24","address"]),path:[].concat(r,[e.fee,u.address])}}),{inputToken:t.input.wrapped,path:[],types:[]}),i=n.path,r=n.types;return e?a.pack(r.reverse(),i.reverse()):a.pack(r,i)}function X(t,i){var r=e.leftShift(e.BigInt(t),e.BigInt(192)),a=e.BigInt(i),u=e.divide(r,a);return n.sqrt(u)}var U=function(){function t(){}return t.mulDivRoundingUp=function(t,n,i){var r=e.multiply(t,n),a=e.divide(r,i);return e.notEqual(e.remainder(r,i),q)&&(a=e.add(a,w)),a},t.mulDiv=function(t,n,i){var r=e.multiply(t,n);return e.divide(r,i)},t.getSmallerRootOfQuadEqn=function(t,i,r){var a=e.multiply(i,i),u=e.multiply(t,r),o=n.sqrt(e.subtract(a,u)),s=e.subtract(i,o);return e.divide(s,t)},t}(),W=function(){function t(){}return t.addDelta=function(t,n){return e.lessThan(n,q)?e.subtract(t,e.multiply(n,x)):e.add(t,n)},t}();function j(t,n,i){if(e.greaterThan(t,n)){var r=[n,t];t=r[0],n=r[1]}var a=e.divide(e.multiply(t,n),R);return e.divide(e.multiply(e.BigInt(i),a),e.subtract(n,t))}function Q(t,n,i){if(e.greaterThan(t,n)){var r=[n,t];t=r[0],n=r[1]}var a=e.multiply(e.multiply(e.BigInt(i),t),n),u=e.multiply(R,e.subtract(n,t));return e.divide(a,u)}function K(t,n,i){if(e.greaterThan(t,n)){var r=[n,t];t=r[0],n=r[1]}return e.divide(e.multiply(e.BigInt(i),R),e.subtract(n,t))}function H(t,n,i,r,a,u){if(e.greaterThan(n,i)){var o=[i,n];n=o[0],i=o[1]}var s=u?Q:j;if(e.lessThanOrEqual(t,n))return s(n,i,r);if(e.lessThan(t,i)){var p=s(t,i,r),l=K(n,t,a);return e.lessThan(p,l)?p:l}return K(n,i,a)}function z(t,i,r){var a=N.getSqrtRatioAtTick(r),u=e.multiply(a,a);return t.sortsBefore(i)?new n.Price(t,i,P,u):new n.Price(t,i,u,P)}var G=function(t){return t<N.MIN_TICK?N.MIN_TICK:t>N.MAX_TICK?N.MAX_TICK:t},Y=e.subtract(e.exponentiate(e.BigInt(2),e.BigInt(160)),w),V=e.exponentiate(e.BigInt(10),e.BigInt(5));function Z(t,i){var r=e.multiply(t,i);return e.bitwiseAnd(r,n.MaxUint256)}var $=function(){function t(){}return t.getAmount0Unlock=function(t){return U.mulDivRoundingUp(e.BigInt(100),R,t)},t.getAmount1Unlock=function(t){return U.mulDivRoundingUp(e.BigInt(100),t,R)},t.getAmount0Delta=function(t,n,i,r){if(e.greaterThan(t,n)){var a=[n,t];t=a[0],n=a[1]}var u=e.leftShift(i,e.BigInt(96)),o=e.subtract(n,t);return r?U.mulDivRoundingUp(U.mulDivRoundingUp(u,o,n),w,t):e.divide(e.divide(e.multiply(u,o),n),t)},t.getAmount0DeltaFeeCompounding=function(t,n,i,r,a){if(e.greaterThan(t,n)){var u=[n,t];t=u[0],n=u[1]}var o=e.multiply(e.BigInt(2),e.leftShift(i,e.BigInt(96))),s=e.subtract(n,t),p=e.subtract(e.multiply(e.BigInt(2),t),e.divide(e.multiply(e.BigInt(r),n),e.subtract(V,e.BigInt(0)))),l=a?U.mulDivRoundingUp(U.mulDivRoundingUp(o,s,n),w,p):e.divide(e.divide(e.multiply(o,s),n),p);return[l,a?U.mulDivRoundingUp(U.mulDivRoundingUp(l,e.divide(e.multiply(e.BigInt(r),n),e.subtract(V,e.BigInt(0))),e.BigInt(2)),w,R):e.divide(e.divide(e.multiply(l,e.divide(e.multiply(e.BigInt(r),n),e.subtract(V,e.BigInt(0)))),e.BigInt(2)),R)]},t.getAmount1Delta=function(t,n,i,r){if(e.greaterThan(t,n)){var a=[n,t];t=a[0],n=a[1]}return r?U.mulDivRoundingUp(i,e.subtract(n,t),R):e.divide(e.multiply(i,e.subtract(n,t)),R)},t.getNextSqrtPriceFromInput=function(t,n,i,r){return e.greaterThan(t,q)||u(!1),e.greaterThan(n,q)||u(!1),r?this.getNextSqrtPriceFromAmount0RoundingUp(t,n,i,!0):this.getNextSqrtPriceFromAmount1RoundingDown(t,n,i,!0)},t.getNextSqrtPriceFromOutput=function(t,n,i,r){return e.greaterThan(t,q)||u(!1),e.greaterThan(n,q)||u(!1),r?this.getNextSqrtPriceFromAmount1RoundingDown(t,n,i,!1):this.getNextSqrtPriceFromAmount0RoundingUp(t,n,i,!1)},t.getNextSqrtPriceFromAmount0RoundingUp=function(t,i,r,a){if(e.equal(r,q))return t;var o=e.leftShift(i,e.BigInt(96));if(a){var s=Z(r,t);if(e.equal(e.divide(s,r),t)){var p=(c=e.add(o,s),e.bitwiseAnd(c,n.MaxUint256));if(e.greaterThanOrEqual(p,o))return U.mulDivRoundingUp(o,t,p)}return U.mulDivRoundingUp(o,w,e.add(e.divide(o,t),r))}var l=Z(r,t);e.equal(e.divide(l,r),t)||u(!1),e.greaterThan(o,l)||u(!1);var c,d=e.subtract(o,l);return U.mulDivRoundingUp(o,t,d)},t.getNextSqrtPriceFromAmount1RoundingDown=function(t,n,i,r){if(r){var a=e.lessThanOrEqual(i,Y)?e.divide(e.leftShift(i,e.BigInt(96)),n):e.divide(e.multiply(i,R),n);return e.add(t,a)}var o=U.mulDivRoundingUp(i,R,n);return e.greaterThan(t,o)||u(!1),e.subtract(t,o)},t}(),J=function(t){var n=t.index,i=t.liquidityGross,r=t.liquidityNet;n>=N.MIN_TICK&&n<=N.MAX_TICK||u(!1),this.index=n,this.liquidityGross=e.BigInt(i),this.liquidityNet=e.BigInt(r)},tt=function(){function t(t,e){var n=t.map((function(t){return t instanceof J?t:new J(t)}));D.validateList(n,e),this.ticks=n}var e=t.prototype;return e.getTick=function(){var t=p(v.mark((function t(e){return v.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",D.getTick(this.ticks,e));case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.nextInitializedTickWithinOneWord=function(){var t=p(v.mark((function t(e,n,i){return v.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",D.nextInitializedTickWithinOneWord(this.ticks,e,n,i));case 1:case"end":return t.stop()}}),t,this)})));return function(e,n,i){return t.apply(this,arguments)}}(),e.nextInitializedTickWithinFixedDistance=function(){var t=p(v.mark((function t(e,n,i){return v.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",D.nextInitializedTickWithinFixedDistance(this.ticks,e,n,i));case 1:case"end":return t.stop()}}),t,this)})));return function(e,n,i){return t.apply(this,arguments)}}(),t}(),et=e.exponentiate(e.BigInt(10),e.BigInt(5)),nt=e.multiply(et,e.BigInt(2)),it=function(){function t(){}return t.computeSwapStepPromm=function(n,i,r,a,u,o,s){var p={sqrtRatioNextX96:q,amountIn:q,amountOut:q,deltaL:q};if(e.equal(n,i))return[n,q,q,q];var l=t.calcReachAmount(n,i,r,u,o,s);console.log("======usedAmount of tick 480,",l.toString()),o&&e.greaterThanOrEqual(l,a)||!o&&e.lessThanOrEqual(l,a)?l=a:p.sqrtRatioNextX96=i,p.amountIn=l;var c=e.greaterThanOrEqual(l,q)?l:e.multiply(l,e.BigInt(-1));return e.equal(p.sqrtRatioNextX96,q)?(p.deltaL=t.estimateIncrementalLiquidity(c,r,n,u,o,s),p.sqrtRatioNextX96=t.calcFinalPrice(c,r,p.deltaL,n,o,s)):p.deltaL=t.calcIncrementalLiquidity(n,i,r,c,o,s),p.amountOut=t.calcReturnedAmount(n,p.sqrtRatioNextX96,r,p.deltaL,o,s),[p.sqrtRatioNextX96,p.amountIn,p.amountOut,p.deltaL]},t.calcReachAmount=function(t,n,i,r,a,u){var o,s=t>=n?e.subtract(t,n):e.subtract(n,t);if(a)if(u){var p=e.subtract(e.multiply(nt,n),e.multiply(e.BigInt(r),t)),l=U.mulDiv(i,e.multiply(nt,s),p);o=U.mulDiv(l,R,t)}else{var c=e.subtract(e.multiply(nt,t),e.multiply(e.BigInt(r),n)),d=U.mulDiv(i,e.multiply(nt,s),c);o=U.mulDiv(d,t,R)}else if(u){var y=e.subtract(e.multiply(nt,t),e.multiply(e.BigInt(r),n)),m=e.subtract(y,e.multiply(e.BigInt(r),t));m=U.mulDiv(e.leftShift(i,e.BigInt(96)),m,y),o=e.divide(U.mulDiv(m,s,t),n),o=e.multiply(o,e.BigInt(-1))}else{var f=e.subtract(e.multiply(nt,n),e.multiply(e.BigInt(r),t)),h=e.subtract(f,e.multiply(e.BigInt(r),n));h=U.mulDiv(i,h,f),o=U.mulDiv(h,s,R),o=e.multiply(o,e.BigInt(-1))}return o},t.calcReturnedAmount=function(t,n,i,r,a,u){var o;return o=u?e.add(U.mulDivRoundingUp(r,n,R),a?e.multiply(U.mulDiv(i,e.subtract(t,n),R),e.BigInt(-1)):U.mulDivRoundingUp(i,e.subtract(n,t),R)):e.add(U.mulDivRoundingUp(e.add(i,r),R,n),e.multiply(U.mulDivRoundingUp(i,R,t),e.BigInt(-1))),a&&e.equal(o,e.BigInt(1))&&(o=q),o},t.calcIncrementalLiquidity=function(t,n,i,r,a,u){if(u){var o=U.mulDiv(i,R,t),s=a?e.add(o,r):e.subtract(o,r),p=U.mulDiv(n,s,R);return e.greaterThan(p,i)?e.subtract(p,i):q}var l=U.mulDiv(i,t,R),c=a?e.add(l,r):e.subtract(l,r),d=U.mulDiv(c,R,n);return e.greaterThan(d,i)?e.subtract(d,i):q},t.estimateIncrementalLiquidity=function(t,n,i,r,a,u){var o,s=e.BigInt(r);if(a)o=u?U.mulDiv(i,e.multiply(t,s),e.leftShift(nt,e.BigInt(96))):U.mulDiv(R,e.multiply(t,s),e.multiply(nt,i));else{var p=s,l=e.subtract(et,s),c=e.multiply(e.multiply(s,n),t);u?(l=e.subtract(l,U.mulDiv(e.multiply(et,t),i,R)),c=U.mulDiv(c,i,R)):(l=e.subtract(l,U.mulDiv(e.multiply(et,t),R,i)),c=U.mulDiv(c,R,i)),o=U.getSmallerRootOfQuadEqn(p,l,c)}return o},t.calcFinalPrice=function(t,n,i,r,a,u){if(u){var o=U.mulDiv(t,r,R);return a?U.mulDivRoundingUp(e.add(n,i),r,e.add(n,o)):U.mulDiv(e.add(n,i),r,e.subtract(n,o))}var s=U.mulDiv(t,R,r);return a?U.mulDiv(e.add(n,s),r,e.add(n,i)):U.mulDivRoundingUp(e.subtract(n,s),r,e.add(n,i))},t.computeSwapStep=function(t,n,i,r,a){var u={},o=e.greaterThanOrEqual(t,n),s=e.greaterThanOrEqual(r,q);if(s){var p=e.divide(e.multiply(r,e.subtract(et,e.BigInt(a))),et);u.amountIn=o?$.getAmount0Delta(n,t,i,!0):$.getAmount1Delta(t,n,i,!0),u.sqrtRatioNextX96=e.greaterThanOrEqual(p,u.amountIn)?n:$.getNextSqrtPriceFromInput(t,i,p,o)}else u.amountOut=o?$.getAmount1Delta(n,t,i,!1):$.getAmount0Delta(t,n,i,!1),u.sqrtRatioNextX96=e.greaterThanOrEqual(e.multiply(r,x),u.amountOut)?n:$.getNextSqrtPriceFromOutput(t,i,e.multiply(r,x),o);var l=e.equal(n,u.sqrtRatioNextX96);return o?(u.amountIn=l&&s?u.amountIn:$.getAmount0Delta(u.sqrtRatioNextX96,t,i,!0),u.amountOut=l&&!s?u.amountOut:$.getAmount1Delta(u.sqrtRatioNextX96,t,i,!1)):(u.amountIn=l&&s?u.amountIn:$.getAmount1Delta(t,u.sqrtRatioNextX96,i,!0),u.amountOut=l&&!s?u.amountOut:$.getAmount0Delta(t,u.sqrtRatioNextX96,i,!1)),!s&&e.greaterThan(u.amountOut,e.multiply(r,x))&&(u.amountOut=e.multiply(r,x)),u.feeAmount=s&&e.notEqual(u.sqrtRatioNextX96,n)?e.subtract(r,u.amountIn):U.mulDivRoundingUp(u.amountIn,e.BigInt(a),e.subtract(et,e.BigInt(a))),[u.sqrtRatioNextX96,u.amountIn,u.amountOut,u.feeAmount]},t}(),rt=new A,at=function(){function t(t,n,i,r,a,o,s,p){void 0===p&&(p=rt),Number.isInteger(i)&&i<1e5||u(!1);var l=N.getSqrtRatioAtTick(s),c=N.getSqrtRatioAtTick(s+1);e.greaterThanOrEqual(e.BigInt(r),l)&&e.lessThanOrEqual(e.BigInt(r),c)||u(!1);var d=t.sortsBefore(n)?[t,n]:[n,t];this.token0=d[0],this.token1=d[1],this.fee=i,this.sqrtRatioX96=e.BigInt(r),this.liquidity=e.BigInt(a),this.reinvestLiquidity=e.BigInt(o),this.tickCurrent=s,this.tickDataProvider=Array.isArray(p)?new tt(p,I[i]):p}t.getAddress=function(t,e,n,i){return b({factoryAddress:"0x0C7369F931a8D809E443c1d4A5DCe663fF888a73",fee:n,tokenA:t,tokenB:e,initCodeHashManualOverride:i})};var i=t.prototype;return i.involvesToken=function(t){return t.equals(this.token0)||t.equals(this.token1)},i.priceOf=function(t){return this.involvesToken(t)||u(!1),t.equals(this.token0)?this.token0Price:this.token1Price},i.getOutputAmount=function(){var i=p(v.mark((function i(r,a){var o,s,p,l,c;return v.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return this.involvesToken(r.currency)||u(!1),o=r.currency.equals(this.token0),i.next=4,this.swap(o,r.quotient,a);case 4:return p=(s=i.sent).sqrtRatioX96,l=s.liquidity,c=s.tickCurrent,i.abrupt("return",[n.CurrencyAmount.fromRawAmount(o?this.token1:this.token0,e.multiply(s.amountCalculated,x)),new t(this.token0,this.token1,this.fee,p,l,0,c,this.tickDataProvider)]);case 11:case"end":return i.stop()}}),i,this)})));return function(t,e){return i.apply(this,arguments)}}(),i.getOutputAmountProMM=function(){var i=p(v.mark((function i(r,a){var o,s,p,l,c,d;return v.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return this.involvesToken(r.currency)||u(!1),o=r.currency.equals(this.token0),i.next=4,this.swapProMM(o,r.quotient,a);case 4:return p=(s=i.sent).sqrtRatioX96,l=s.baseL,c=s.reinvestL,d=s.tickCurrent,i.abrupt("return",[n.CurrencyAmount.fromRawAmount(o?this.token1:this.token0,e.multiply(s.amountCalculated,x)),new t(this.token0,this.token1,this.fee,p,l,c,d,this.tickDataProvider)]);case 12:case"end":return i.stop()}}),i,this)})));return function(t,e){return i.apply(this,arguments)}}(),i.getInputAmount=function(){var i=p(v.mark((function i(r,a){var o,s,p,l,c;return v.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return r.currency.isToken&&this.involvesToken(r.currency)||u(!1),o=r.currency.equals(this.token1),i.next=4,this.swap(o,e.multiply(r.quotient,x),a);case 4:return p=(s=i.sent).sqrtRatioX96,l=s.liquidity,c=s.tickCurrent,i.abrupt("return",[n.CurrencyAmount.fromRawAmount(o?this.token0:this.token1,s.amountCalculated),new t(this.token0,this.token1,this.fee,p,l,0,c,this.tickDataProvider)]);case 11:case"end":return i.stop()}}),i,this)})));return function(t,e){return i.apply(this,arguments)}}(),i.swapProMM=function(){var t=p(v.mark((function t(n,i,r){var a,o,s,p,l,c;return v.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r||(r=n?e.add(N.MIN_SQRT_RATIO,w):e.subtract(N.MAX_SQRT_RATIO,w)),n?(e.greaterThan(r,N.MIN_SQRT_RATIO)||u(!1),e.lessThan(r,this.sqrtRatioX96)||u(!1)):(e.lessThan(r,N.MAX_SQRT_RATIO)||u(!1),e.greaterThan(r,this.sqrtRatioX96)||u(!1)),a=e.greaterThanOrEqual(i,q),o={amountSpecifiedRemaining:i,amountCalculated:q,baseL:this.liquidity,reinvestL:this.reinvestLiquidity,sqrtPriceX96:this.sqrtRatioX96,tick:this.tickCurrent};case 4:if(!e.notEqual(o.amountSpecifiedRemaining,q)||o.sqrtPriceX96==r){t.next=41;break}return console.log("===[s] 1.state",Object.fromEntries(Object.entries(o).map((function(t){return[t[0],t[1].toString()]})))),(s={}).sqrtPriceStartX96=o.sqrtPriceX96,t.next=10,this.tickDataProvider.nextInitializedTickWithinFixedDistance(o.tick,n,480);case 10:if(s.tickNext=(p=t.sent)[0],s.initialized=p[1],s.tickNext<N.MIN_TICK?s.tickNext=N.MIN_TICK:s.tickNext>N.MAX_TICK&&(s.tickNext=N.MAX_TICK),s.sqrtPriceNextX96=N.getSqrtRatioAtTick(s.tickNext),console.log("===[s] 2.step",Object.fromEntries(Object.entries(s).map((function(t){var e=t[1];return[t[0],e?e.toString():e]})))),l=it.computeSwapStepPromm(o.sqrtPriceX96,(n?e.lessThan(s.sqrtPriceNextX96,r):e.greaterThan(s.sqrtPriceNextX96,r))?r:s.sqrtPriceNextX96,e.add(o.baseL,o.reinvestL),o.amountSpecifiedRemaining,this.fee,a,n),o.sqrtPriceX96=l[0],s.amountIn=l[1],s.amountOut=l[2],s.deltaL=l[3],console.log("===[s] 3.step",Object.fromEntries(Object.entries(s).map((function(t){var e=t[1];return[t[0],e?e.toString():e]})))),o.amountSpecifiedRemaining=e.subtract(o.amountSpecifiedRemaining,s.amountIn),o.amountCalculated=e.add(o.amountCalculated,s.amountOut),o.reinvestL=e.add(o.reinvestL,s.deltaL),!e.equal(o.sqrtPriceX96,s.sqrtPriceNextX96)){t.next=37;break}if(!s.initialized){t.next=34;break}return t.t0=e,t.next=30,this.tickDataProvider.getTick(s.tickNext);case 30:t.t1=t.sent.liquidityNet,c=t.t0.BigInt.call(t.t0,t.t1),n&&(c=e.multiply(c,x)),o.baseL=W.addDelta(o.baseL,c);case 34:o.tick=n?s.tickNext-1:s.tickNext,t.next=38;break;case 37:o.tick=N.getTickAtSqrtRatio(o.sqrtPriceX96);case 38:console.log("===[s] 4.state",Object.fromEntries(Object.entries(o).map((function(t){var e=t[1];return[t[0],e?e.toString():e]})))),t.next=4;break;case 41:return t.abrupt("return",{amountCalculated:o.amountCalculated,sqrtRatioX96:o.sqrtPriceX96,baseL:o.baseL,reinvestL:o.reinvestL,tickCurrent:o.tick});case 42:case"end":return t.stop()}}),t,this)})));return function(e,n,i){return t.apply(this,arguments)}}(),i.swap=function(){var t=p(v.mark((function t(n,i,r){var a,o,s,p,l,c;return v.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r||(r=n?e.add(N.MIN_SQRT_RATIO,w):e.subtract(N.MAX_SQRT_RATIO,w)),n?(e.greaterThan(r,N.MIN_SQRT_RATIO)||u(!1),e.lessThan(r,this.sqrtRatioX96)||u(!1)):(e.lessThan(r,N.MAX_SQRT_RATIO)||u(!1),e.greaterThan(r,this.sqrtRatioX96)||u(!1)),a=e.greaterThanOrEqual(i,q),o={amountSpecifiedRemaining:i,amountCalculated:q,sqrtPriceX96:this.sqrtRatioX96,tick:this.tickCurrent,liquidity:this.liquidity};case 4:if(!e.notEqual(o.amountSpecifiedRemaining,q)||o.sqrtPriceX96==r){t.next=35;break}return(s={}).sqrtPriceStartX96=o.sqrtPriceX96,t.next=9,this.tickDataProvider.nextInitializedTickWithinOneWord(o.tick,n,this.tickSpacing);case 9:if(s.tickNext=(p=t.sent)[0],s.initialized=p[1],s.tickNext<N.MIN_TICK?s.tickNext=N.MIN_TICK:s.tickNext>N.MAX_TICK&&(s.tickNext=N.MAX_TICK),s.sqrtPriceNextX96=N.getSqrtRatioAtTick(s.tickNext),l=it.computeSwapStep(o.sqrtPriceX96,(n?e.lessThan(s.sqrtPriceNextX96,r):e.greaterThan(s.sqrtPriceNextX96,r))?r:s.sqrtPriceNextX96,o.liquidity,o.amountSpecifiedRemaining,this.fee),o.sqrtPriceX96=l[0],s.amountIn=l[1],s.amountOut=l[2],s.feeAmount=l[3],a?(o.amountSpecifiedRemaining=e.subtract(o.amountSpecifiedRemaining,e.add(s.amountIn,s.feeAmount)),o.amountCalculated=e.subtract(o.amountCalculated,s.amountOut)):(o.amountSpecifiedRemaining=e.add(o.amountSpecifiedRemaining,s.amountOut),o.amountCalculated=e.add(o.amountCalculated,e.add(s.amountIn,s.feeAmount))),!e.equal(o.sqrtPriceX96,s.sqrtPriceNextX96)){t.next=32;break}if(!s.initialized){t.next=29;break}return t.t0=e,t.next=25,this.tickDataProvider.getTick(s.tickNext);case 25:t.t1=t.sent.liquidityNet,c=t.t0.BigInt.call(t.t0,t.t1),n&&(c=e.multiply(c,x)),o.liquidity=W.addDelta(o.liquidity,c);case 29:o.tick=n?s.tickNext-1:s.tickNext,t.next=33;break;case 32:o.sqrtPriceX96!=s.sqrtPriceStartX96&&(o.tick=N.getTickAtSqrtRatio(o.sqrtPriceX96));case 33:t.next=4;break;case 35:return t.abrupt("return",{amountCalculated:o.amountCalculated,sqrtRatioX96:o.sqrtPriceX96,liquidity:o.liquidity,tickCurrent:o.tick});case 36:case"end":return t.stop()}}),t,this)})));return function(e,n,i){return t.apply(this,arguments)}}(),c(t,[{key:"token0Price",get:function(){var t;return null!=(t=this._token0Price)?t:this._token0Price=new n.Price(this.token0,this.token1,P,e.multiply(this.sqrtRatioX96,this.sqrtRatioX96))}},{key:"token1Price",get:function(){var t;return null!=(t=this._token1Price)?t:this._token1Price=new n.Price(this.token1,this.token0,e.multiply(this.sqrtRatioX96,this.sqrtRatioX96),P)}},{key:"chainId",get:function(){return this.token0.chainId}},{key:"tickSpacing",get:function(){return I[this.fee]}}]),t}(),ut=function(){function t(t){var n=t.pool,i=t.liquidity,r=t.tickLower,a=t.tickUpper;this._token0Amount=null,this._token1Amount=null,this._mintAmounts=null,r<a||u(!1),r>=N.MIN_TICK&&r%n.tickSpacing==0||u(!1),a<=N.MAX_TICK&&a%n.tickSpacing==0||u(!1),this.pool=n,this.tickLower=r,this.tickUpper=a,this.liquidity=e.BigInt(i)}var i=t.prototype;return i.ratiosAfterSlippage=function(t){var i=this.pool.token0Price.asFraction.multiply(new n.Percent(1).subtract(t)),r=this.pool.token0Price.asFraction.multiply(t.add(1)),a=X(i.numerator,i.denominator);e.lessThanOrEqual(a,N.MIN_SQRT_RATIO)&&(a=e.add(N.MIN_SQRT_RATIO,e.BigInt(1)));var u=X(r.numerator,r.denominator);return e.greaterThanOrEqual(u,N.MAX_SQRT_RATIO)&&(u=e.subtract(N.MAX_SQRT_RATIO,e.BigInt(1))),{sqrtRatioX96Lower:a,sqrtRatioX96Upper:u}},i.mintAmountsWithSlippage=function(e){var n=this.ratiosAfterSlippage(e),i=n.sqrtRatioX96Upper,r=n.sqrtRatioX96Lower,a=new at(this.pool.token0,this.pool.token1,this.pool.fee,r,0,this.pool.reinvestLiquidity,N.getTickAtSqrtRatio(r)),u=new at(this.pool.token0,this.pool.token1,this.pool.fee,i,0,this.pool.reinvestLiquidity,N.getTickAtSqrtRatio(i)),o=t.fromAmounts(d({pool:this.pool,tickLower:this.tickLower,tickUpper:this.tickUpper},this.mintAmounts,{useFullPrecision:!1}));return{amount0:new t({pool:u,liquidity:o.liquidity,tickLower:this.tickLower,tickUpper:this.tickUpper}).mintAmounts.amount0,amount1:new t({pool:a,liquidity:o.liquidity,tickLower:this.tickLower,tickUpper:this.tickUpper}).mintAmounts.amount1}},i.burnAmountsWithSlippage=function(e){var n=this.ratiosAfterSlippage(e),i=n.sqrtRatioX96Upper,r=n.sqrtRatioX96Lower,a=new at(this.pool.token0,this.pool.token1,this.pool.fee,r,0,this.pool.reinvestLiquidity,N.getTickAtSqrtRatio(r)),u=new t({pool:new at(this.pool.token0,this.pool.token1,this.pool.fee,i,0,this.pool.reinvestLiquidity,N.getTickAtSqrtRatio(i)),liquidity:this.liquidity,tickLower:this.tickLower,tickUpper:this.tickUpper}).amount0,o=new t({pool:a,liquidity:this.liquidity,tickLower:this.tickLower,tickUpper:this.tickUpper}).amount1;return{amount0:u.quotient,amount1:o.quotient}},t.fromAmounts=function(e){var n=e.pool,i=e.tickLower,r=e.tickUpper,a=e.amount0,u=e.amount1,o=e.useFullPrecision,s=N.getSqrtRatioAtTick(i),p=N.getSqrtRatioAtTick(r);return new t({pool:n,tickLower:i,tickUpper:r,liquidity:H(n.sqrtRatioX96,s,p,a,u,o)})},t.fromAmount0=function(e){return t.fromAmounts({pool:e.pool,tickLower:e.tickLower,tickUpper:e.tickUpper,amount0:e.amount0,amount1:n.MaxUint256,useFullPrecision:e.useFullPrecision})},t.fromAmount1=function(e){return t.fromAmounts({pool:e.pool,tickLower:e.tickLower,tickUpper:e.tickUpper,amount0:n.MaxUint256,amount1:e.amount1,useFullPrecision:!0})},c(t,[{key:"token0PriceLower",get:function(){return z(this.pool.token0,this.pool.token1,this.tickLower)}},{key:"token0PriceUpper",get:function(){return z(this.pool.token0,this.pool.token1,this.tickUpper)}},{key:"amount0",get:function(){return null===this._token0Amount&&(this._token0Amount=n.CurrencyAmount.fromRawAmount(this.pool.token0,this.pool.tickCurrent<this.tickLower?$.getAmount0Delta(N.getSqrtRatioAtTick(this.tickLower),N.getSqrtRatioAtTick(this.tickUpper),this.liquidity,!1):this.pool.tickCurrent<this.tickUpper?$.getAmount0Delta(this.pool.sqrtRatioX96,N.getSqrtRatioAtTick(this.tickUpper),this.liquidity,!1):q)),this._token0Amount}},{key:"amount1",get:function(){return null===this._token1Amount&&(this._token1Amount=n.CurrencyAmount.fromRawAmount(this.pool.token1,this.pool.tickCurrent<this.tickLower?q:$.getAmount1Delta(N.getSqrtRatioAtTick(this.tickLower),this.pool.tickCurrent<this.tickUpper?this.pool.sqrtRatioX96:N.getSqrtRatioAtTick(this.tickUpper),this.liquidity,!1))),this._token1Amount}},{key:"mintAmounts",get:function(){return null===this._mintAmounts?this.pool.tickCurrent<this.tickLower?{amount0:$.getAmount0Delta(N.getSqrtRatioAtTick(this.tickLower),N.getSqrtRatioAtTick(this.tickUpper),this.liquidity,!0),amount1:q}:this.pool.tickCurrent<this.tickUpper?{amount0:$.getAmount0Delta(this.pool.sqrtRatioX96,N.getSqrtRatioAtTick(this.tickUpper),this.liquidity,!0),amount1:$.getAmount1Delta(N.getSqrtRatioAtTick(this.tickLower),this.pool.sqrtRatioX96,this.liquidity,!0)}:{amount0:q,amount1:$.getAmount1Delta(N.getSqrtRatioAtTick(this.tickLower),N.getSqrtRatioAtTick(this.tickUpper),this.liquidity,!0)}:this._mintAmounts}}]),t}(),ot=function(){function t(t,e,n){this._midPrice=null,t.length>0||u(!1);var i=t[0].chainId;t.every((function(t){return t.chainId===i}))||u(!1);var r=e.wrapped;t[0].involvesToken(r)||u(!1),t[t.length-1].involvesToken(n.wrapped)||u(!1);for(var a,o=[r],s=m(t.entries());!(a=s()).done;){var p=a.value,l=p[1],c=o[p[0]];c.equals(l.token0)||c.equals(l.token1)||u(!1);var d=c.equals(l.token0)?l.token1:l.token0;o.push(d)}this.pools=t,this.tokenPath=o,this.input=e,this.output=null!=n?n:o[o.length-1]}return c(t,[{key:"chainId",get:function(){return this.pools[0].chainId}},{key:"midPrice",get:function(){if(null!==this._midPrice)return this._midPrice;var t=this.pools.slice(1).reduce((function(t,e){var n=t.price;return t.nextInput.equals(e.token0)?{nextInput:e.token1,price:n.multiply(e.token0Price)}:{nextInput:e.token0,price:n.multiply(e.token1Price)}}),this.pools[0].token0.equals(this.input.wrapped)?{nextInput:this.pools[0].token1,price:this.pools[0].token0Price}:{nextInput:this.pools[0].token0,price:this.pools[0].token1Price}).price;return this._midPrice=new n.Price(this.input,this.output,t.denominator,t.numerator)}}]),t}(),st=function(){function t(t){var e=t.routes,n=t.tradeType,i=e[0].inputAmount.currency,r=e[0].outputAmount.currency;e.every((function(t){return i.wrapped.equals(t.route.input.wrapped)}))||u(!1),e.every((function(t){return r.wrapped.equals(t.route.output.wrapped)}))||u(!1);for(var a,o=e.map((function(t){return t.route.pools.length})).reduce((function(t,e){return t+e}),0),s=new Set,p=m(e);!(a=p()).done;)for(var l,c=m(a.value.route.pools);!(l=c()).done;){var d=l.value;s.add(at.getAddress(d.token0,d.token1,d.fee))}o!=s.size&&u(!1),this.swaps=e,this.tradeType=n}t.createUncheckedTrade=function(e){return new t(d({},e,{routes:[{inputAmount:e.inputAmount,outputAmount:e.outputAmount,route:e.route}]}))};var e=t.prototype;return e.minimumAmountOut=function(t,e){if(void 0===e&&(e=this.outputAmount),t.lessThan(q)&&u(!1),this.tradeType===n.TradeType.EXACT_OUTPUT)return e;var i=new n.Fraction(w).add(t).invert().multiply(e.quotient).quotient;return n.CurrencyAmount.fromRawAmount(e.currency,i)},e.maximumAmountIn=function(t,e){if(void 0===e&&(e=this.inputAmount),t.lessThan(q)&&u(!1),this.tradeType===n.TradeType.EXACT_INPUT)return e;var i=new n.Fraction(w).add(t).multiply(e.quotient).quotient;return n.CurrencyAmount.fromRawAmount(e.currency,i)},e.worstExecutionPrice=function(t){return new n.Price(this.inputAmount.currency,this.outputAmount.currency,this.maximumAmountIn(t).quotient,this.minimumAmountOut(t).quotient)},c(t,[{key:"route",get:function(){return 1!=this.swaps.length&&u(!1),this.swaps[0].route}},{key:"inputAmount",get:function(){if(this._inputAmount)return this._inputAmount;var t=this.swaps[0].inputAmount.currency,e=this.swaps.map((function(t){return t.inputAmount})).reduce((function(t,e){return t.add(e)}),n.CurrencyAmount.fromRawAmount(t,0));return this._inputAmount=e,this._inputAmount}},{key:"outputAmount",get:function(){if(this._outputAmount)return this._outputAmount;var t=this.swaps[0].outputAmount.currency,e=this.swaps.map((function(t){return t.outputAmount})).reduce((function(t,e){return t.add(e)}),n.CurrencyAmount.fromRawAmount(t,0));return this._outputAmount=e,this._outputAmount}},{key:"executionPrice",get:function(){var t;return null!=(t=this._executionPrice)?t:this._executionPrice=new n.Price(this.inputAmount.currency,this.outputAmount.currency,this.inputAmount.quotient,this.outputAmount.quotient)}},{key:"priceImpact",get:function(){if(this._priceImpact)return this._priceImpact;for(var t,e=n.CurrencyAmount.fromRawAmount(this.outputAmount.currency,0),i=m(this.swaps);!(t=i()).done;){var r=t.value;e=e.add(r.route.midPrice.quote(r.inputAmount))}var a=e.subtract(this.outputAmount).divide(e);return this._priceImpact=new n.Percent(a.numerator,a.denominator),this._priceImpact}}]),t}(),pt=[{inputs:[{internalType:"bytes[]",name:"data",type:"bytes[]"}],name:"multicall",outputs:[{internalType:"bytes[]",name:"results",type:"bytes[]"}],stateMutability:"payable",type:"function"}],lt=function(){function t(){}return t.encodeMulticall=function(e){return Array.isArray(e)||(e=[e]),1===e.length?e[0]:t.INTERFACE.encodeFunctionData("multicall",[e])},t}();lt.INTERFACE=new i.Interface(pt);var ct=[{inputs:[{internalType:"address",name:"_factory",type:"address"},{internalType:"address",name:"_WETH",type:"address"},{internalType:"address",name:"_descriptor",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint128",name:"liquidity",type:"uint128"},{indexed:!1,internalType:"uint256",name:"amount0",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount1",type:"uint256"},{indexed:!1,internalType:"uint256",name:"additionalRTokenOwed",type:"uint256"}],name:"AddLiquidity",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"BurnPosition",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"rTokenBurn",type:"uint256"}],name:"BurnRToken",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!0,internalType:"uint80",name:"poolId",type:"uint80"},{indexed:!1,internalType:"uint128",name:"liquidity",type:"uint128"},{indexed:!1,internalType:"uint256",name:"amount0",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount1",type:"uint256"}],name:"MintPosition",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint128",name:"liquidity",type:"uint128"},{indexed:!1,internalType:"uint256",name:"amount0",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount1",type:"uint256"},{indexed:!1,internalType:"uint256",name:"additionalRTokenOwed",type:"uint256"}],name:"RemoveLiquidity",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"additionalRTokenOwed",type:"uint256"}],name:"SyncFeeGrowth",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"DOMAIN_SEPARATOR",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"PERMIT_TYPEHASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"WETH",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"int24[2]",name:"ticksPrevious",type:"int24[2]"},{internalType:"uint256",name:"amount0Desired",type:"uint256"},{internalType:"uint256",name:"amount1Desired",type:"uint256"},{internalType:"uint256",name:"amount0Min",type:"uint256"},{internalType:"uint256",name:"amount1Min",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"}],internalType:"struct IBasePositionManager.IncreaseLiquidityParams",name:"params",type:"tuple"}],name:"addLiquidity",outputs:[{internalType:"uint128",name:"liquidity",type:"uint128"},{internalType:"uint256",name:"amount0",type:"uint256"},{internalType:"uint256",name:"amount1",type:"uint256"},{internalType:"uint256",name:"additionalRTokenOwed",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"addressToPoolId",outputs:[{internalType:"uint80",name:"",type:"uint80"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"antiSnipAttackData",outputs:[{internalType:"uint32",name:"lastActionTime",type:"uint32"},{internalType:"uint32",name:"lockTime",type:"uint32"},{internalType:"uint32",name:"unlockTime",type:"uint32"},{internalType:"uint256",name:"feesLocked",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"burn",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"amount0Min",type:"uint256"},{internalType:"uint256",name:"amount1Min",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"}],internalType:"struct IBasePositionManager.BurnRTokenParams",name:"params",type:"tuple"}],name:"burnRTokens",outputs:[{internalType:"uint256",name:"rTokenQty",type:"uint256"},{internalType:"uint256",name:"amount0",type:"uint256"},{internalType:"uint256",name:"amount1",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token0",type:"address"},{internalType:"address",name:"token1",type:"address"},{internalType:"uint24",name:"fee",type:"uint24"},{internalType:"uint160",name:"currentSqrtP",type:"uint160"}],name:"createAndUnlockPoolIfNecessary",outputs:[{internalType:"address",name:"pool",type:"address"}],stateMutability:"payable",type:"function"},{inputs:[],name:"factory",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"isRToken",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"address",name:"token0",type:"address"},{internalType:"address",name:"token1",type:"address"},{internalType:"uint24",name:"fee",type:"uint24"},{internalType:"int24",name:"tickLower",type:"int24"},{internalType:"int24",name:"tickUpper",type:"int24"},{internalType:"int24[2]",name:"ticksPrevious",type:"int24[2]"},{internalType:"uint256",name:"amount0Desired",type:"uint256"},{internalType:"uint256",name:"amount1Desired",type:"uint256"},{internalType:"uint256",name:"amount0Min",type:"uint256"},{internalType:"uint256",name:"amount1Min",type:"uint256"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],internalType:"struct IBasePositionManager.MintParams",name:"params",type:"tuple"}],name:"mint",outputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint128",name:"liquidity",type:"uint128"},{internalType:"uint256",name:"amount0",type:"uint256"},{internalType:"uint256",name:"amount1",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"deltaQty0",type:"uint256"},{internalType:"uint256",name:"deltaQty1",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"mintCallback",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes[]",name:"data",type:"bytes[]"}],name:"multicall",outputs:[{internalType:"bytes[]",name:"results",type:"bytes[]"}],stateMutability:"payable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextPoolId",outputs:[{internalType:"uint80",name:"",type:"uint80"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextTokenId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"permit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"positions",outputs:[{components:[{internalType:"uint96",name:"nonce",type:"uint96"},{internalType:"address",name:"operator",type:"address"},{internalType:"uint80",name:"poolId",type:"uint80"},{internalType:"int24",name:"tickLower",type:"int24"},{internalType:"int24",name:"tickUpper",type:"int24"},{internalType:"uint128",name:"liquidity",type:"uint128"},{internalType:"uint256",name:"rTokenOwed",type:"uint256"},{internalType:"uint256",name:"feeGrowthInsideLast",type:"uint256"}],internalType:"struct IBasePositionManager.Position",name:"pos",type:"tuple"},{components:[{internalType:"address",name:"token0",type:"address"},{internalType:"uint24",name:"fee",type:"uint24"},{internalType:"address",name:"token1",type:"address"}],internalType:"struct IBasePositionManager.PoolInfo",name:"info",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[],name:"refundEth",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint128",name:"liquidity",type:"uint128"},{internalType:"uint256",name:"amount0Min",type:"uint256"},{internalType:"uint256",name:"amount1Min",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"}],internalType:"struct IBasePositionManager.RemoveLiquidityParams",name:"params",type:"tuple"}],name:"removeLiquidity",outputs:[{internalType:"uint256",name:"amount0",type:"uint256"},{internalType:"uint256",name:"amount1",type:"uint256"},{internalType:"uint256",name:"additionalRTokenOwed",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"syncFeeGrowth",outputs:[{internalType:"uint256",name:"additionalRTokenOwed",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"minAmount",type:"uint256"},{internalType:"address",name:"recipient",type:"address"}],name:"transferAllTokens",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"minAmount",type:"uint256"},{internalType:"address",name:"recipient",type:"address"}],name:"unwrapWeth",outputs:[],stateMutability:"payable",type:"function"},{stateMutability:"payable",type:"receive"}],dt=[{inputs:[],name:"refundEth",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amountMinimum",type:"uint256"},{internalType:"address",name:"recipient",type:"address"}],name:"transferAllTokens",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amountMinimum",type:"uint256"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"feeBips",type:"uint256"},{internalType:"address",name:"feeRecipient",type:"address"}],name:"transferAllTokensWithFee",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"amountMinimum",type:"uint256"},{internalType:"address",name:"recipient",type:"address"}],name:"unwrapWeth",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"amountMinimum",type:"uint256"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"feeBips",type:"uint256"},{internalType:"address",name:"feeRecipient",type:"address"}],name:"unwrapWethWithFee",outputs:[],stateMutability:"payable",type:"function"}],yt=function(t){return n.validateAndParseAddress(t)},mt=function(){function t(){}return t.encodeFeeBips=function(t){return B(t.multiply(1e4).quotient)},t.encodeUnwrapWETH=function(e,n,i){if(n=yt(n),i){var r=this.encodeFeeBips(i.fee),a=yt(i.recipient);return t.INTERFACE.encodeFunctionData("unwrapWethWithFee",[B(e),n,r,a])}return t.INTERFACE.encodeFunctionData("unwrapWeth",[B(e),n])},t.encodeSweepToken=function(e,n,i,r){if(i=yt(i),r){var a=this.encodeFeeBips(r.fee),u=yt(r.recipient);return t.INTERFACE.encodeFunctionData("transferAllTokensWithFee",[e.address,B(n),i,a,u])}return t.INTERFACE.encodeFunctionData("transferAllTokens",[e.address,B(n),i])},t.encodeRefundETH=function(){return t.INTERFACE.encodeFunctionData("refundEth")},t}();mt.INTERFACE=new i.Interface(dt);var ft=["expectedCurrencyOwed0","expectedCurrencyOwed1"];function ht(t){return Object.keys(t).some((function(t){return"recipient"===t}))}var Tt=function(){function t(){}return t.encodeCreate=function(e){return t.INTERFACE.encodeFunctionData("createAndUnlockPoolIfNecessary",[e.token0.address,e.token1.address,e.fee,B(e.sqrtRatioX96)])},t.createCallParameters=function(t){return lt.encodeMulticall([this.encodeCreate(t)]),{calldata:this.encodeCreate(t),value:B(0)}},t.createCallParametersTest=function(t,e){return{calldata:this.encodeCreate(t),value:B(e)}},t.addCallParameters=function(n,i,r){var a=this,o=Array.isArray(n)?n:[n];ht(r)&&r.createPool&&1!==o.length&&u(!1);var s=Array.isArray(i[0])?i:[i];o.length!==s.length&&u(!1),o.forEach((function(t){e.greaterThan(t.liquidity,q)||u(!1)}));var p=[],l=e.BigInt(0),c=e.BigInt(0);return o.forEach((function(n,i){var o=n.mintAmounts,d=o.amount0,y=o.amount1,m=n.mintAmountsWithSlippage(r.slippageTolerance),f=B(m.amount0),h=B(m.amount1),T=B(r.deadline);if(ht(r)&&r.createPool&&p.push(a.encodeCreate(n.pool)),ht(r)){var v=yt(r.recipient);p.push(t.INTERFACE.encodeFunctionData("mint",[{token0:n.pool.token0.address,token1:n.pool.token1.address,fee:n.pool.fee,tickLower:n.tickLower,tickUpper:n.tickUpper,ticksPrevious:s[i],amount0Desired:B(d),amount1Desired:B(y),amount0Min:f,amount1Min:h,recipient:v,deadline:T}]))}else p.push(t.INTERFACE.encodeFunctionData("addLiquidity",[{tokenId:B(r.tokenId),ticksPrevious:s[i],amount0Desired:B(d),amount1Desired:B(y),amount0Min:f,amount1Min:h,deadline:T}]));if(r.useNative){var k=r.useNative.wrapped;n.pool.token0.equals(k)||n.pool.token1.equals(k)||u(!1);var g=n.pool.token0.equals(k)?d:y;if(e.greaterThan(g,q)&&(c=e.add(c,g)),ht(r)&&r.createPool){var I=n.pool.token0.equals(k)?$.getAmount0Unlock(n.pool.sqrtRatioX96):$.getAmount1Unlock(n.pool.sqrtRatioX96);l=e.add(l,e.add(g,I))}else l=e.add(g,l)}})),e.greaterThan(c,q)&&p.push(mt.encodeRefundETH()),{calldata:lt.encodeMulticall(p),value:B(l)}},t.encodeCollect=function(e){var n=[],i=B(e.tokenId),r=yt(e.recipient),a=B(e.deadline);e.isRemovingLiquid||e.isPositionClosed||n.push(e.legacyMode?t.INTERFACE.encodeFunctionData("removeLiquidity",[{tokenId:i,liquidity:"0x1",amount0Min:0,amount1Min:0,deadline:a}]):t.INTERFACE.encodeFunctionData("syncFeeGrowth",[i])),e.havingFee&&n.push(t.INTERFACE.encodeFunctionData("burnRTokens",[{tokenId:i,amount0Min:0,amount1Min:0,deadline:a}]));var u=e.expectedCurrencyOwed1.currency.isNative,o=e.expectedCurrencyOwed0.quotient,s=e.expectedCurrencyOwed1.quotient;return n.push(e.expectedCurrencyOwed0.currency.isNative?mt.encodeUnwrapWETH(o,r):mt.encodeSweepToken(e.expectedCurrencyOwed0.currency,o,r)),n.push(u?mt.encodeUnwrapWETH(s,r):mt.encodeSweepToken(e.expectedCurrencyOwed1.currency,s,r)),n},t.collectCallParameters=function(e){var n=t.encodeCollect(e);return{calldata:lt.encodeMulticall(n),value:B(0)}},t.removeCallParameters=function(i,r){var a=[],o=B(r.deadline),s=B(r.tokenId);console.log(i);var p=new ut({pool:i.pool,liquidity:r.liquidityPercentage.multiply(i.liquidity).quotient,tickLower:i.tickLower,tickUpper:i.tickUpper});e.greaterThan(p.liquidity,q)||u(!1);var l=p.burnAmountsWithSlippage(r.slippageTolerance),c=l.amount0,y=l.amount1;r.permit&&a.push(t.INTERFACE.encodeFunctionData("permit",[yt(r.permit.spender),s,B(r.permit.deadline),r.permit.v,r.permit.r,r.permit.s])),a.push(t.INTERFACE.encodeFunctionData("removeLiquidity",[{tokenId:s,liquidity:B(p.liquidity),amount0Min:B(c),amount1Min:B(y),deadline:o}]));var m=r.collectOptions,f=m.expectedCurrencyOwed0,h=m.expectedCurrencyOwed1,T=function(t,e){if(null==t)return{};var n,i,r={},a=Object.keys(t);for(i=0;i<a.length;i++)e.indexOf(n=a[i])>=0||(r[n]=t[n]);return r}(m,ft);return a.push.apply(a,t.encodeCollect(d({tokenId:B(r.tokenId),expectedCurrencyOwed0:f.add(n.CurrencyAmount.fromRawAmount(f.currency,c)),expectedCurrencyOwed1:h.add(n.CurrencyAmount.fromRawAmount(h.currency,y))},T))),r.liquidityPercentage.equalTo(w)?r.burnToken&&a.push(t.INTERFACE.encodeFunctionData("burn",[s])):!0===r.burnToken&&u(!1),{calldata:lt.encodeMulticall(a),value:B(0)}},t.safeTransferFromParameters=function(e){var n=yt(e.recipient),i=yt(e.sender);return{calldata:e.data?t.INTERFACE.encodeFunctionData("safeTransferFrom(address,address,uint256,bytes)",[i,n,B(e.tokenId),e.data]):t.INTERFACE.encodeFunctionData("safeTransferFrom(address,address,uint256)",[i,n,B(e.tokenId)]),value:B(0)}},t}();Tt.INTERFACE=new i.Interface(ct);var vt=[{inputs:[{internalType:"address",name:"_factory",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"factory",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"path",type:"bytes"},{internalType:"uint256",name:"amountIn",type:"uint256"}],name:"quoteExactInput",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint160[]",name:"afterSqrtPList",type:"uint160[]"},{internalType:"uint32[]",name:"initializedTicksCrossedList",type:"uint32[]"},{internalType:"uint256",name:"gasEstimate",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint24",name:"feeUnits",type:"uint24"},{internalType:"uint160",name:"limitSqrtP",type:"uint160"}],internalType:"struct IQuoterV2.QuoteExactInputSingleParams",name:"params",type:"tuple"}],name:"quoteExactInputSingle",outputs:[{components:[{internalType:"uint256",name:"usedAmount",type:"uint256"},{internalType:"uint256",name:"returnedAmount",type:"uint256"},{internalType:"uint160",name:"afterSqrtP",type:"uint160"},{internalType:"uint32",name:"initializedTicksCrossed",type:"uint32"},{internalType:"uint256",name:"gasEstimate",type:"uint256"}],internalType:"struct IQuoterV2.QuoteOutput",name:"output",type:"tuple"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes",name:"path",type:"bytes"},{internalType:"uint256",name:"amountOut",type:"uint256"}],name:"quoteExactOutput",outputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint160[]",name:"afterSqrtPList",type:"uint160[]"},{internalType:"uint32[]",name:"initializedTicksCrossedList",type:"uint32[]"},{internalType:"uint256",name:"gasEstimate",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint24",name:"feeUnits",type:"uint24"},{internalType:"uint160",name:"limitSqrtP",type:"uint160"}],internalType:"struct IQuoterV2.QuoteExactOutputSingleParams",name:"params",type:"tuple"}],name:"quoteExactOutputSingle",outputs:[{components:[{internalType:"uint256",name:"usedAmount",type:"uint256"},{internalType:"uint256",name:"returnedAmount",type:"uint256"},{internalType:"uint160",name:"afterSqrtP",type:"uint160"},{internalType:"uint32",name:"initializedTicksCrossed",type:"uint32"},{internalType:"uint256",name:"gasEstimate",type:"uint256"}],internalType:"struct IQuoterV2.QuoteOutput",name:"output",type:"tuple"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"int256",name:"amount0Delta",type:"int256"},{internalType:"int256",name:"amount1Delta",type:"int256"},{internalType:"bytes",name:"path",type:"bytes"}],name:"swapCallback",outputs:[],stateMutability:"view",type:"function"}],kt=function(){function t(){}return t.quoteCallParameters=function(e,i,r,a){void 0===a&&(a={});var o,s=1===e.pools.length,p=B(i.quotient);if(s){var l,c,d,y;o=r===n.TradeType.EXACT_INPUT?t.INTERFACE.encodeFunctionData("quoteExactInputSingle",[[e.tokenPath[0].address,e.tokenPath[1].address,p,e.pools[0].fee,B(null!=(l=null==(c=a)?void 0:c.sqrtPriceLimitX96)?l:0)]]):t.INTERFACE.encodeFunctionData("quoteExactOutputSingle",[[e.tokenPath[0].address,e.tokenPath[1].address,p,e.pools[0].fee,B(null!=(d=null==(y=a)?void 0:y.sqrtPriceLimitX96)?d:0)]])}else{var m;void 0!==(null==(m=a)?void 0:m.sqrtPriceLimitX96)&&u(!1);var f=F(e,r===n.TradeType.EXACT_OUTPUT);o=t.INTERFACE.encodeFunctionData(r===n.TradeType.EXACT_INPUT?"quoteExactInput":"quoteExactOutput",[f,p])}return{calldata:o,value:B(0)}},t}();kt.INTERFACE=new i.Interface(vt);var gt=function(){function t(){}return t.encodePermit=function(e,n){return"nonce"in n?t.INTERFACE.encodeFunctionData("selfPermitAllowed",[e.address,B(n.nonce),B(n.expiry),n.v,n.r,n.s]):t.INTERFACE.encodeFunctionData("selfPermit",[e.address,B(n.amount),B(n.deadline),n.v,n.r,n.s])},t}();gt.INTERFACE=new i.Interface(o.abi);var It=[{inputs:[{internalType:"address",name:"_factory",type:"address"},{internalType:"address",name:"_WETH",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"WETH",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"factory",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes[]",name:"data",type:"bytes[]"}],name:"multicall",outputs:[{internalType:"bytes[]",name:"results",type:"bytes[]"}],stateMutability:"payable",type:"function"},{inputs:[],name:"refundEth",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"int256",name:"deltaQty0",type:"int256"},{internalType:"int256",name:"deltaQty1",type:"int256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"swapCallback",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"bytes",name:"path",type:"bytes"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"minAmountOut",type:"uint256"}],internalType:"struct IRouter.ExactInputParams",name:"params",type:"tuple"}],name:"swapExactInput",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint24",name:"fee",type:"uint24"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"minAmountOut",type:"uint256"},{internalType:"uint160",name:"limitSqrtP",type:"uint160"}],internalType:"struct IRouter.ExactInputSingleParams",name:"params",type:"tuple"}],name:"swapExactInputSingle",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes",name:"path",type:"bytes"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint256",name:"maxAmountIn",type:"uint256"}],internalType:"struct IRouter.ExactOutputParams",name:"params",type:"tuple"}],name:"swapExactOutput",outputs:[{internalType:"uint256",name:"amountIn",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint24",name:"fee",type:"uint24"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint256",name:"maxAmountIn",type:"uint256"},{internalType:"uint160",name:"limitSqrtP",type:"uint160"}],internalType:"struct IRouter.ExactOutputSingleParams",name:"params",type:"tuple"}],name:"swapExactOutputSingle",outputs:[{internalType:"uint256",name:"amountIn",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"minAmount",type:"uint256"},{internalType:"address",name:"recipient",type:"address"}],name:"transferAllTokens",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"minAmount",type:"uint256"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"feeUnits",type:"uint256"},{internalType:"address",name:"feeRecipient",type:"address"}],name:"transferAllTokensWithFee",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"minAmount",type:"uint256"},{internalType:"address",name:"recipient",type:"address"}],name:"unwrapWeth",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"minAmount",type:"uint256"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"feeUnits",type:"uint256"},{internalType:"address",name:"feeRecipient",type:"address"}],name:"unwrapWethWithFee",outputs:[],stateMutability:"payable",type:"function"},{stateMutability:"payable",type:"receive"}],bt=function(){function t(){}return t.swapCallParameters=function(e,i){Array.isArray(e)||(e=[e]);var r=e[0],a=r.inputAmount.currency.wrapped,o=r.outputAmount.currency.wrapped;e.every((function(t){return t.inputAmount.currency.wrapped.equals(a)}))||u(!1),e.every((function(t){return t.outputAmount.currency.wrapped.equals(o)}))||u(!1);var s=[],p=n.CurrencyAmount.fromRawAmount(e[0].inputAmount.currency,0),l=n.CurrencyAmount.fromRawAmount(e[0].outputAmount.currency,0),c=e.reduce((function(t,e){return t.add(e.minimumAmountOut(i.slippageTolerance))}),l),d=r.inputAmount.currency.isNative&&r.tradeType===n.TradeType.EXACT_OUTPUT,y=r.outputAmount.currency.isNative,f=y||!!i.fee,h=r.inputAmount.currency.isNative?e.reduce((function(t,e){return t.add(e.maximumAmountIn(i.slippageTolerance))}),p):p;i.inputTokenPermit&&(r.inputAmount.currency.isToken||u(!1),s.push(gt.encodePermit(r.inputAmount.currency,i.inputTokenPermit)));for(var T,v=yt(i.recipient),g=B(i.deadline),I=m(e);!(T=I()).done;)for(var b,A=T.value,x=m(A.swaps);!(b=x()).done;){var q=b.value,w=q.route,R=q.outputAmount,P=B(A.maximumAmountIn(i.slippageTolerance,q.inputAmount).quotient),E=B(A.minimumAmountOut(i.slippageTolerance,R).quotient);if(1===w.pools.length)if(A.tradeType===n.TradeType.EXACT_INPUT){var S,M={tokenIn:w.tokenPath[0].address,tokenOut:w.tokenPath[1].address,fee:w.pools[0].fee,recipient:f?k:v,deadline:g,amountIn:P,minAmountOut:E,limitSqrtP:B(null!=(S=i.sqrtPriceLimitX96)?S:0)};s.push(t.INTERFACE.encodeFunctionData("swapExactInputSingle",[M]))}else{var O,C={tokenIn:w.tokenPath[0].address,tokenOut:w.tokenPath[1].address,fee:w.pools[0].fee,recipient:f?k:v,deadline:g,amountOut:E,maxAmountIn:P,limitSqrtP:B(null!=(O=i.sqrtPriceLimitX96)?O:0)};s.push(t.INTERFACE.encodeFunctionData("swapExactOutputSingle",[C]))}else{void 0!==i.sqrtPriceLimitX96&&u(!1);var N=F(w,A.tradeType===n.TradeType.EXACT_OUTPUT);s.push(A.tradeType===n.TradeType.EXACT_INPUT?t.INTERFACE.encodeFunctionData("swapExactInput",[{path:N,recipient:f?k:v,deadline:g,amountIn:P,minAmountOut:E}]):t.INTERFACE.encodeFunctionData("swapExactOutput",[{path:N,recipient:f?k:v,deadline:g,amountOut:E,maxAmountIn:P}]))}}return f&&s.push(i.fee?y?mt.encodeUnwrapWETH(c.quotient,v,i.fee):mt.encodeSweepToken(r.outputAmount.currency.wrapped,c.quotient,v,i.fee):mt.encodeUnwrapWETH(c.quotient,v)),d&&s.push(mt.encodeRefundETH()),{calldata:lt.encodeMulticall(s),value:B(h.quotient)}},t}();bt.INTERFACE=new i.Interface(It),exports.ADDRESS_ZERO=k,exports.FACTORY_ADDRESS="0x0C7369F931a8D809E443c1d4A5DCe663fF888a73",exports.FullMath=U,exports.LiquidityMath=W,exports.MIN_LIQUIDITY=100,exports.Multicall=lt,exports.NoTickDataProvider=A,exports.NonfungiblePositionManager=Tt,exports.POOL_INIT_CODE_HASH=g,exports.Payments=mt,exports.Pool=at,exports.Position=ut,exports.Route=ot,exports.SelfPermit=gt,exports.SqrtPriceMath=$,exports.SwapQuoter=kt,exports.SwapRouter=bt,exports.TICK_SPACINGS=I,exports.Tick=J,exports.TickList=D,exports.TickListDataProvider=tt,exports.TickMath=N,exports.Trade=st,exports.computePoolAddress=b,exports.encodeRouteToPath=F,exports.encodeSqrtRatioX96=X,exports.isSorted=L,exports.maxLiquidityForAmounts=H,exports.mostSignificantBit=M,exports.nearestUsableTick=function(t,e){Number.isInteger(t)&&Number.isInteger(e)||u(!1),e>0||u(!1),t>=N.MIN_TICK&&t<=N.MAX_TICK||u(!1);var n=Math.round(t/e)*e;return n<N.MIN_TICK?n+e:n>N.MAX_TICK?n-e:n},exports.priceToClosestTick=function(t){var e=t.baseCurrency.sortsBefore(t.quoteCurrency)?X(t.numerator,t.denominator):X(t.denominator,t.numerator),n=N.getTickAtSqrtRatio(e),i=z(t.baseCurrency,t.quoteCurrency,G(n-2)),r=z(t.baseCurrency,t.quoteCurrency,G(n-1)),a=z(t.baseCurrency,t.quoteCurrency,n),u=z(t.baseCurrency,t.quoteCurrency,G(n+1)),o=z(t.baseCurrency,t.quoteCurrency,G(n+2)),s=function(t,e){if(!e.length)return null;var n=e[0];return e.forEach((function(e){return n=function(t,e,n){var i=e.lessThan(n)?e:n,r=e.lessThan(n)?n:e,a=r.add(i).divide(2);return a.lessThan(t)||a.equalTo(t)?r:i}(t,n,e)})),n}(t,[i,r,a,u,o]);return null!=s&&s.equalTo(i)?G(n-2):null!=s&&s.equalTo(r)?G(n-1):null!=s&&s.equalTo(a)?n:null!=s&&s.equalTo(u)?G(n+1):null!=s&&s.equalTo(o)?G(n+2):n},exports.tickToPrice=z,exports.toHex=B;
//# sourceMappingURL=ks-sdk-elastic.cjs.production.min.js.map
